@model IEnumerable<MakiYumpuSAC.Models.Pedido>

@{
    ViewData["Title"] = "Pedidos Inactivos";
}

<div class="mt-3 d-flex justify-content-between align-items-start">
    <h4>Pedidos Inactivos</h4>
    <a class="btn btn-outline-secondary" asp-action="Index">Volver</a>
</div>

<table class="table">
    <thead>
    <tr>
        <th>
            ID
        </th>
        <th>
            Fecha de Generación
        </th>
        <th>
            Fecha Estimada
        </th>
        <th>
            Estado
        </th>
        <th>
            Cliente
        </th>
        <th>
            Usuario
        </th>
        <th>
            Detalles
        </th>
        <th></th>
    </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.IdPedido)
        </td>
        <td>
            @{
                var fechaGeneracion = item.FechaGeneracionPedido;
                @fechaGeneracion.ToString("dd/MM/yyyy")
            }
        </td>
        <td>
            @{
                var fechaEntrega = item.FechaEntrega;
                @fechaEntrega.ToString("dd/MM/yyyy")
            }
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EstadoPedido)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IdClienteNavigation.NombreCompletoCliente)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IdUsuarioNavigation.NombresUsuario)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.DetallePedidos.Count)
        </td>
        <td>
            <div class="d-flex align-items-center gap-2">
                <a class="btn btn-outline-primary" asp-action="Details" asp-route-id="@item.IdPedido">Ver detalles</a>
                <form asp-action="Inactivos">
                    <input type="hidden" name="id" value="@item.IdPedido" />
                    <input class="btn btn-outline-success" type="submit" value="Reactivar" />
                </form>
            </div>
        </td>
    </tr>
}
    </tbody>
</table>

@section Scripts {
    <script type="module">
        import toastMessage from '/js/toastMessage.js';

        document.addEventListener("DOMContentLoaded", function () {
            const doneMessage = "@ViewBag.DoneMessage";

            doneMessage && toastMessage(doneMessage, "success");
        });
    </script>
}